# Default values for label-studio Helm chart.
# This mirrors the configuration from deployment/docker/label-studio/docker-compose.yml
fullnameOverride: label-studio

replicaCount: 1

global:
  imageRegistry: ""

image:
  repository: heartexlabs/label-studio
  tag: "latest"
  pullPolicy: IfNotPresent

service:
  type: NodePort
  port: 8000
  nodePort: 30001

# Corresponds to docker-compose port mapping 30001:8000
ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: ""
      paths:
        - path: /
          pathType: Prefix
  tls: []

resources: {}

nodeSelector: {}

tolerations: []

affinity: {}

env:
  DJANGO_DB: "default"
  POSTGRE_NAME: "labelstudio"
  POSTGRE_USER: "postgres"
  POSTGRE_PASSWORD: "password"
  POSTGRE_PORT: 5432
  POSTGRE_HOST: "datamate-database"
  LABEL_STUDIO_HOST: "" # can be overridden
  LOCAL_FILES_SERVING_ENABLED: "true"
  LOCAL_FILES_DOCUMENT_ROOT: "/label-studio/local"
  USE_USERNAME_FOR_LOGIN: "true"
  LABEL_STUDIO_USERNAME: "admin@demo.com"
  LABEL_STUDIO_PASSWORD: "demoadmin"
  LABEL_STUDIO_ENABLE_LEGACY_API_TOKEN: "true"
  LABEL_STUDIO_USER_TOKEN: "abc123abc123"
  LOG_LEVEL: "DEBUG"

persistence:
  enabled: true
  existingClaim: "" # if you already have PVC that maps to external datamate-dataset-volume
  size: 10Gi
  storageClass: ""

# Name of the Kubernetes PVC to simulate external Docker volume `datamate-dataset-volume`
# If not set and persistence.enabled=true, a PVC will be created automatically.
datasetVolume:
  enabled: true
  claimName: datamate-dataset-pvc # if empty, uses same PVC as persistence or creates a dedicated one

# PgBouncer configuration for connection pooling
pgbouncer:
  enabled: true
  replicaCount: 1

  image:
    repository: pgbouncer/pgbouncer
    tag: "latest"
    pullPolicy: IfNotPresent

  # Connection pool settings
  poolMode: transaction  # transaction, session, or statement
  maxClientConn: 100     # Maximum number of client connections
  defaultPoolSize: 20    # Default pool size per database (max connections to PostgreSQL)
  maxDbConnections: 20   # Maximum database connections (hard limit)

  resources: {}

  nodeSelector: {}

  tolerations: []

  affinity: {}

